package gameObjects;

import java.awt.Graphics2D;
import main.Window;

public class Bullet extends GameObject {
	private int life = 0;
	
	public Bullet(int x, int y, String id, int angle, int speed, String owner) {
		super(x+20, y+20, id);
		this.speed = speed;
		this.angle = angle;
		setOwner(owner);
		init();
	}

	public void init() {
		angleCheck();
		velX = 1;
		velY = 1;
		LoadImage("res/bullet.png");
	}

	public void update() {
		checkLife();
		double tempX = 0, tempY = 0;
		if (angle >= 0 && angle <= 3) {
			tempY = -Math.cos(angle * Math.PI / 8);
			tempX = Math.sin(angle * Math.PI / 8);
		} else if (angle >= 4 && angle <= 7) {
			tempX = Math.cos((angle - 4) * Math.PI / 8);
			tempY = Math.sin((angle - 4) * Math.PI / 8);
		} else if (angle >= 8 && angle <= 11) {
			tempY = Math.cos((angle - 8) * Math.PI / 8);
			tempX = -Math.sin((angle - 8) * Math.PI / 8);
			if (angle == 12)
				tempX = 0;
		} else if (angle >= 12 && angle <= 15) {
			tempX = -Math.cos((angle - 12) * Math.PI / 8);
			tempY = -Math.sin((angle - 12) * Math.PI / 8);
		}
		x += (int) (tempX * speed) * velX;
		y += (int) (tempY * speed) * velY;

		if (x < 0 || x > Window.WIDTH - 8) {
			velX *= -1;
		}
		if (y < 0 || y > Window.HEIGHT - 8) {
			velY *= -1;
		}
	}

	public void checkLife() {
		life++;

		if (life > 100) {
			setAlive(false);
		}
	}

	public void draw(Graphics2D g) {
		g.drawImage(image, x, y, null);
	}



}
