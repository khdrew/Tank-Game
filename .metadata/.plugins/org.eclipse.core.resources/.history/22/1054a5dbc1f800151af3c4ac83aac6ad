package gameObjects;

import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;

import main.Window;

public class Tank extends GameObject{
	
	public Tank(int x, int y, String id) {
		super(x, y, id);
		init();
	}

	public void init() {
		speed = 3.0;
		if (id == "Player1") {
			angle = 0;
			LoadImage("res/tank1.png");
		} else {
			angle = 12;
			LoadImage("res/tank2.png");
		}
	}
	
	public void respawn (){
		
	}

	public void update() {
		
		double tempX = 0, tempY = 0;
		if (angle >= 0 && angle <= 3) {
			tempY = -Math.cos(angle * Math.PI / 8);
			tempX = Math.sin(angle * Math.PI / 8);
		} else if (angle >= 4 && angle <= 7) {
			tempX = Math.cos((angle - 4) * Math.PI / 8);
			tempY = Math.sin((angle - 4) * Math.PI / 8);
		} else if (angle >= 8 && angle <= 11) {
			tempY = Math.cos((angle - 8) * Math.PI / 8);
			tempX = -Math.sin((angle - 8) * Math.PI / 8);
		} else if (angle >= 12 && angle <= 15) {
			tempX = -Math.cos((angle - 12) * Math.PI / 8);
			tempY = -Math.sin((angle - 12) * Math.PI / 8);
		}
		x += (int) (tempX * speed) * velY;
		y += (int) (tempY * speed) * velY;
		
		if (x < 0 || x > Window.WIDTH - 46){
			x -= (int) (tempX * speed) * velY;
		}
		if (y < 0 || y > Window.HEIGHT - 48){
			y -= (int) (tempY * speed) * velY;
		}
		
		
	}

	public void turnLeft(){
		setAngle(getAngle() - 1);
		angleCheck();
	}
	
	public void turnRight(){
		setAngle(getAngle() + 1);
		angleCheck();
	}
	
	public void draw(Graphics2D g) {
		AffineTransform at = AffineTransform.getTranslateInstance(x, y);
		at.rotate(Math.toRadians(angle * 22.5), image.getWidth()/2, image.getHeight()/2);
		g.drawImage(image, at, null);
		
	}

}
